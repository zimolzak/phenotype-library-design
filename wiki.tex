\documentclass{tufte-handout}
\title{Design of a VA Phenotype Library}
\author{Andrew Zimolzak, MD, MMSc}
\date{March 27, 2017}

\begin{document}

\maketitle

It all starts with the research protocol! What should we capture and
why? VA data elements are not harmonized across stations. We have 130+
stations which are not incentivized to represent data in the same
way.\footnote{``[D]ata aggregation across the VHA is highly
  problematic, and data validity is often impossible to verify.''
  \emph{N Engl J Med} 373:1693--1695} Ugly units in lab tests are not
unique to VA, however.\footnote{Hemoglobin A1c units: ``\%, \%HB, \%
  A1C, MG/DL, G/DL, NULL, Blank, U.'' \emph{Pharmacoepidemiol Drug
    Saf.} 23(6):609--18.} \emph{Phenotype} is the term we use for a
set of harmonized data elements, or a higher-order concept made of
many such ``building blocks.'' DCP often wanting to know ``where did
this come from?''\footnote{Failed first line platinum containing
  chemotherapy. Urgent coronary revascularization (completed or
  attempted) because of unstable angina. Erectile dysfunction, defined
  as first prescription for PDE5 inhibitor or referral for ED.}

\section{List of wants}

When a subject matter expert (SME), analyst, statistician, and/or data
pull engineer create a phenotype, the result can be: SQL code that
represents the SME's rules, or a public database table that represents
the enumerated list of included/excluded data items, or even a
statistical model of the likelihood of a patient having the given
phenotype. 

Code versus documentation versus data versus metadata. Documentation
is in sentences and paragraphs.\footnote{E.g.\ ``[S]hould the ETL
  process be interrupted by any kind of database, host machine or
  connection issue\ldots{}, in order to protect data and avoid partial
  load the ETL will not re-execute itself and a warning message will
  be written into the log table on the next execution
  attempts\ldots{}.'' Courtesy of Oleg Soloviev.}


Ideally, a robust phenotype library should exist, serving several
functions: (1) The library would make the products of each SME/data
review process \emph{available for viewing} by study coordinators or
others, with ``provenance'' (responsible SME and data extractor)
clearly noted, to allow study staff to trust a given phenotype. It
should also make it easy to browse an overview of all phenotypes
without having to drill down into numerous different subfolders. (2)
The library would make phenotypes \emph{available for reuse}, for the
purposes of other projects. (3) The library would allow easy
\emph{searches across phenotypes,} to allow new studies to discover
what already exists. Importantly, search should cover the contents of
each document---not just titles. (4) The library would make phenotypes
\emph{available for renewal,} with their date of creation clearly
noted, because data warehouse elements may change over time. (5) The
library would \emph{document} the rationale for decisions made by SME,
analyst, etc.\ and allow collaborative editing of this documentation.


%%% note: go get OMOP. Go get DIMLAB2. Get list of sta3ns?

List of popular phenotypes and their metadata.  What data model? OMOP?
Probabilistic or complex phenotype.


The basic idea is that the methods of science should be documented
well enough to be reproducible---in other words, ``show your
work.''\footnote{``[O]ur policy now mandates that when code is central
  to reaching a paper's conclusions, we require a statement describing
  whether that code is available and setting out any restrictions on
  accessibility.'' \emph{Nature} 514:536, 2014-10-30} For our type of
science, \emph{code is method.}\footnote{sciencecodemanifesto.org} Lab
notebook metaphor.\footnote{``Just as with biological materials, such
  code should be made available alongside results obtained using
  it\ldots{}. Because software support is far more burdensome than
  delivery of materials such as plasmids, this code may be accompanied
  by a disclaimer\ldots{}.'' \emph{Nature Methods} 11 (3): 211. March,
  2014.} Rocket or satellite metaphor.

\section{Wish list}

Going even further, When Frank Lederle \emph{et al.}\ publish the DCP
results, will it be possible to run the whole analysis with one click?
If not, \emph{why not?} Have a system that infers a SME's internal
mental model,\footnote{E.g.\ ``serum sodium is where LabChemTestName
  matches these 3 strings, or where LOINC is one of these 5 codes,
  except in these 20 cases\ldots{}.''} from the SME answering
``keep/discard'' to CDW elements, with only slight further effort from
the SME. For the very most popular ones, counts, monthly perhaps?

The library should be available across VA nationally. Other CSP
studies within Boston, albeit less informatics heavy. Other CSP
studies nationally (other coordinating centers). Non-CSP research
(each local VAMC). Non-research. DCP talks OK to MVP. MVP talks OK to
BD-STEP. But those are relatively informal. Trying to do user
contributed and comparison with OMOP. Slow going on both fronts is my
impression. Maybe due to investment and trust in our own processes and
lack of same in others'? Code sharing and trust.

Personal note: Extremely hard to sync up with people. You're working
on your thing, then you find out somebody else has been working
simultaneously, not in the exact same direction, but in a similar one.
It's an enormous proposition to brain dump from you to them and vice
versa, and then to decide on a common direction. The sync up process
can effectively halt all work at times, and both sides are likely to
see that some of their work (sunk costs) does not get incorporated in
the final product.


\end{document}

% LocalWords:  MAVERIC vhabosapp Jira workflow SME operationalize CDW DMR CSPCC
% LocalWords:  LabChemTestName workflows MediaWiki MySQL PHP wikitext AST HPC
% LocalWords:  GenISIS Phsieh Lalitha viswanath Mmcduffie DCP Rpourali Nilla BD
% LocalWords:  wikicode microvascular SME's Operationalizing SIDs SAS VHA Engl
%%  LocalWords:  SharePoint SharePoint's MAVIN DimLab phenomics LOINC Giroir dl
%%  LocalWords:  LOINCs TestNames subfolders VINCI incentivized Wilensky lll HB
% LocalWords:  CSP VAMC OMOP hould ETL llllllll lllll Hgb Glyco Retic Raebel
% LocalWords:  Pharmacoepidemiol Saf glycosylated HSR Listserv Virec plasmids
% LocalWords:  Timeline versioning revascularization PDE
