\documentclass{tufte-handout}
\title{Design of a VA Phenotype Library}
\author{Andy Zimolzak, MD, MMSc}
\date{March, 2017}

\begin{document}

\maketitle

It all starts with the research protocol!

What should we capture and why?

Extremely hard to sync up with people. You're working on your thing,
then you find out somebody else has been working simultaneously, not
in the exact same direction, but in a similar one. It's an enormous
proposition to brain dump from you to them and vice versa, and then to
decide on a common direction. The sync up process can effectively halt
all work at times, and both sides are likely to see that some of their
work (sunk costs) does not get incorporated in the final product.

Motivation: VA data elements are not harmonized across stations.
\emph{Phenotype} is the term we use for a set of harmonized data
elements, or a higher-order concept made of many such ``building
blocks.''\footnote{For example, 130 stations' ICD codes + labs $\to$
  harmonized ICD + labs $\to$ diabetes + neuropathy $\to$ diabetic
  neuropathy $\to$ which is a subset of diabetes with any
  microvascular complication $\to$ subset of diabetes with any
  complication at all, etc. Other terms: data cleaning, data
  characterization, data integration, data modeling} Because 130
stations are not incentivized to \ldots{}, % paste in here
``data aggregation across the
VHA is highly problematic, and data validity is often impossible to
verify.''\footnote{Giroir BP, Wilensky GR, \emph{N Engl J Med}
  373:1693--1695. PMID: 26422644}

\section{Problems}

Our 130+ stations %% paste in email text here.

Future: want to be national. Other CSP studies within Boston, albeit
less informatics heavy. Other CSP studies nationally (other
coordinating centers). Non-CSP research (each local VAMC).
Non-research. DCP talks OK to MVP. MVP talks OK to BD-STEP. But those
are relatively informal. Trying to do user contributed and comparison
with OMOP. Slow going on both fronts is my impression. Maybe due to
investment and trust in our own processes and lack of same in others'?
Code sharing and trust.

Example quote from documentation: ``[S]hould the ETL process be
interrupted by any kind of database, host machine or connection
issue\ldots{}, in order to protect data and avoid partial load the ETL
will not re-execute itself and a warning message will be written into
the log table on the next execution attempts, until the interrupted
ETL process is manually checked and data integrity is confirmed.''

%%% note: go get OMOP. Go get DIMLAB2. Get list of sta3ns?

\section{Example phenotypes}

Failed first line platinum containing chemotherapy. DCP often wanting
to know ``where did this come from?'' Examples of DCP needs: urgent
coronary revascularization (completed or attempted) because of
unstable angina; hospitalization for acute congestive heart failure;
erectile dysfunction, defined as first prescription for PDE5 inhibitor
or referral for ED; doubling of serum creatinine from baseline; first
use of a medication for diabetes. ``In cases where the outcome
diagnosis is not clear based on the electronic adjudication, we will
resort to manual adjudication\ldots{}. We will also manually adjudicate
10\% of outcomes confirmed or refuted by our algorithms\ldots{}.''

Very nice/ugly lab units variability from Mini-Sentinel has been
published.\footnote{Raebel \emph{et al. Pharmacoepidemiol Drug Saf.}
  2014 Jun;23(6):609--18.} Just a few examples of units observed in
the data, for the hemoglobin A1c (glycosylated hemoglobin) test: \%,
\%HB, \% A1C, MG/DL, G/DL, NULL, Blank, U.

\section{What's in CDW Library---and misc.}

Potassium, albumin, total cholesterol, etc. HSR-DATA Listserv is a
resource. Virec is a resource. Lab notebook metaphor. Rocket or
satellite metaphor.

\section{Future}

Nate's thing: active learning. List of popular phenotypes and their
metadata. For the very most popular ones, counts, monthly perhaps?
What data model? OMOP? Probabilistic or complex phenotype.

\section{Why in the first place}

The basic idea is that the methods of science should be documented
well enough to be reproducible---in other words, ``show your work.''
For our type of science, \emph{code is method.}\footnote{See also
http://sciencecodemanifesto.org}

``key components of publications should be available to peers who wish
to validate the techniques and results. A core element of many papers
is the computer code used by authors in models, simulations and data
analysis.\ldots{} Accordingly, our policy now mandates that when code
is central to reaching a paper's conclusions, we require a statement
describing whether that code is available and setting out any
restrictions on accessibility.''\footnote{\emph{Nature} 514:536,
  2014-10-30}

``This often necessitates that code be written quickly with no
expectation that it will be maintained or used by others in their
experiments. But that code is still an integral part of the materials
and methods. Just as with biological materials, such code should be
made available alongside results obtained using it, with sufficient
explanation as to be interpretable. This includes a minimally
acceptable level of commenting in the code, a description of software
dependencies, and basic installation and use instructions. Because
software support is far more burdensome than delivery of materials
such as plasmids, this code may be accompanied by a disclaimer that it
is released only for reporting and archival
purposes.''\footnote{\emph{Nature Methods} 11 (3): 211. March, 2014.}

Going even further, When Frank Lederle \emph{et al.}\ publish the DCP
results, will it be possible to run the whole analysis with one click?
If not, why not?

\section{What I imagine for a phenotype library}

When a subject matter expert (SME), analyst, statistician, and/or data
pull engineer create a phenotype, the result can be: SQL code that
represents the SME's rules, or a public database table that represents
the enumerated list of included/excluded data items, or even a
statistical model of the likelihood of a patient having the given
phenotype. Ideally, a robust phenotype library should exist, serving
several functions.

(1) The library would make the products of each SME/data review
process \emph{available for viewing} by study coordinators or others,
with ``provenance'' (responsible SME and data extractor) clearly
noted, to allow study staff to trust a given phenotype. It should also
make it easy to browse an overview of all phenotypes without having to
drill down into numerous different subfolders. (2) The library would
make phenotypes \emph{available for reuse}, for the purposes of other
projects. (3) The library would allow easy \emph{searches across
  phenotypes,} to allow new studies to discover what already exists.
Importantly, search should cover the contents of each document---not
just titles. (4) The library would make phenotypes \emph{available for
  renewal,} with their date of creation clearly noted, because data
warehouse elements may change over time. (5) The library would
\emph{document} the rationale for decisions made by SME, analyst,
etc.\ and allow collaborative editing of this documentation. Ideally,
changes would be audited/tracked. Possibly it should allow links among
documents. (6) The library should be available across VA nationally.

\section{Aside about new phenotype build process}

Have a system that infers a SME's internal mental
model,\footnote{E.g.\ ``serum sodium is where LabChemTestName matches
  these 3 given text strings, where Topography matches these 2 given
  strings, or where LOINC is one of these 5 given codes, except in
  these 20 given cases which have probably erroneous LOINCs or
  TestNames\ldots{}.''} from the SME answering ``keep/discard'' to CDW
elements, with only slight further effort from the SME.\footnote{Nate
  Fillmore (BD-STEP fellow) has some ideas about how to approach this,
  e.g.\ a system that learns classification trees that the SME can
  select/edit at a high level.}

\end{document}

% LocalWords:  MAVERIC vhabosapp Jira workflow SME operationalize CDW DMR CSPCC
% LocalWords:  LabChemTestName workflows MediaWiki MySQL PHP wikitext AST HPC
% LocalWords:  GenISIS Phsieh Lalitha viswanath Mmcduffie DCP Rpourali Nilla BD
% LocalWords:  wikicode microvascular SME's Operationalizing SIDs SAS VHA Engl
%%  LocalWords:  SharePoint SharePoint's MAVIN DimLab phenomics LOINC Giroir dl
%%  LocalWords:  LOINCs TestNames subfolders VINCI incentivized Wilensky lll HB
% LocalWords:  CSP VAMC OMOP hould ETL llllllll lllll Hgb Glyco Retic Raebel
% LocalWords:  Pharmacoepidemiol Saf glycosylated HSR Listserv Virec plasmids
% LocalWords:  Timeline versioning revascularization PDE
